name: hcloud-go
kubernetesVersion: 1.32.0
privateNetwork: 10.10.10.0/24
privateSubnetwork: 10.10.10.0/25
machines:
  - id: controlplane-1
    type: init
    platform: hcloud
    talosImage: ghcr.io/siderolabs/installer:v1.11.0
    serverType: cx22
    privateIP: 10.10.10.5
    datacenter: fsn1-dc14
    configPatches:
      - |
        debug: false
        machine:
          kubelet:
            nodeIP:
              validSubnets:
                - 10.10.10.0/24
          time:
            disabled: true
        cluster:
          etcd:
            advertisedSubnets:
              - 10.10.10.0/24
      - |
        machine:
          time:
            disabled: false
      - |
        apiVersion: v1alpha1
        kind: ExtensionServiceConfig
        name: cloudflared
        environment:
          - TUNNEL_TOKEN=CHANGE_ME_AGAIN
          - TUNNEL_METRICS=localhost:2001
          - TUNNEL_EDGE_IP_VERSION=auto
  - id: worker-1
    type: worker
    platform: hcloud
    talosImage: ghcr.io/siderolabs/installer:v1.11.0
    serverType: cx22
    privateIP: 10.10.10.3
    datacenter: fsn1-dc14
    configPatches:
      - |
        debug: false
        machine:
          kubelet:
            nodeIP:
              validSubnets:
                - 10.10.10.0/24
          time:
            disabled: true
      - |
        machine:
          time:
            disabled: false
      - |
        apiVersion: v1alpha1
        kind: ExtensionServiceConfig
        name: cloudflared
        environment:
          - TUNNEL_TOKEN=CHANGE_ME_AGAIN
          - TUNNEL_METRICS=localhost:2001
          - TUNNEL_EDGE_IP_VERSION=auto
