{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "required": ["name", "machines", "usePrivateNetwork"],
  "properties": {
    "patches": {},
    "machineDefaults": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "hcloud": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "serverType": { "type": "string", "default": "cx21" },
            "datacenter": { "type": "string", "default": "nbg1-dc3" }
          }
        }
      }
    },
    "name": { "type": "string", "minLength": 1 },
    "kubernetesVersion": { "type": "string", "default": "v1.33.0" },
    "privateNetwork": { "type": "string" },
    "privateSubnetwork": { "type": "string" },
    "usePrivateNetwork": { "type": "boolean" },
    "skipInitApply": { "type": "boolean" },
    "talosImage": { "type": "string", "default": "ghcr.io/siderolabs/talos:v1.11.5" },
    "anchors": { "type": "object", "additionalProperties": true },
    "machines": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "type", "platform", "variant"],
        "properties": {
          "id": { "type": "string", "minLength": 1 },
          "type": { "type": "string", "minLength": 1 },
          "platform": { "type": "string", "enum": ["hcloud"] },
          "talosInitialVersion": { "type": "string" },
          "talosImage": { "type": "string" },
          "variant": { "type": "string", "enum": ["cloud", "metal"] },
          "privateIP": { "type": "string", "minLength": 1 },
          "configPatches": {
            "type": "array",
            "items": { "type": "string" }
          },
          "userdata": { "type": "string" },
          "apply-config-via-userdata": { "type": "boolean" },
          "hcloud": {
            "type": "object",
            "additionalProperties": false,
            "required": ["serverType"],
            "properties": {
              "serverType": { "type": "string", "default": "cx21" },
              "datacenter": { "type": "string", "default": "nbg1-dc3" }
            }
          }
        }
      }
    }
  }
}
