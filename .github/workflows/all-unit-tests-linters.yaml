name: Run tests and linter for all branches
on:
  push:
    tags-ignore:
      - '**'
    branches:
      - '**'

jobs:
  provider:
    name: Tests and linting for provider directory
    uses: spigell/my-shared-workflows/.github/workflows/golang-test-lint.yaml@main
    with:
      setup-action: 'setup-pulumi-env'
      working-directory: provider

  tests:
    name: Tests and linting for provider directory
    uses: spigell/my-shared-workflows/.github/workflows/golang-test-lint.yaml@main
    with:
      working-directory: integration-tests
